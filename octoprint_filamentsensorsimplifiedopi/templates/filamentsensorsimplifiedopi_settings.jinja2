<form id="filamentsensorsimplifiedopi_settings" class="form-horizontal">
    <div class="alert alert-info" data-bind="visible: printing">
        <i class="fas icon-lock fa-hourglass-half  iconRight"></i>
        {{ _('All settings are disabled while printing') }}
    </div>
    <h3>{{ _('Sensor setup') }}</h3>
    <div class="control-group">
        <label class="control-label" for="filamentsensorsimplifiedopi_settings_gpioMode">{{ _('Board mode') }}</label>
        <div class="controls">
            <select title="{{ _('Board - referring to the pins by the number, BCM - referring to the pins by the Broadcom SOC channel') }}" id="filamentsensorsimplifiedopi_settings_gpioMode" data-bind="value: settingsViewModel.settings.plugins.filamentsensorsimplifiedopi.gpio_mode, disable:gpio_mode_disabled() || printing()" required>
                <option value=10>{{ _('Physical/Board mode') }}</option>
                <option value=11>{{ _('GPIO/BCM mode (Raspberri Pi)') }}</option>
                <option value=12>{{ _('GPIO/SUNXI mode (Orange Pi)') }}</option>
            </select>
            <div class="alert alert-info" data-bind="visible: gpio_mode_disabled">
                <i class="fas fa-info icon-info-sign iconRight"></i>
                {{ _('Board mode has been set by third party/other plugin and is disabled') }}
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="filamentsensorsimplifiedopi_settings_pinInput">{{ _('Pin number') }}</label>
        <div class="controls">
            <input id="filamentsensorsimplifiedopi_settings_pinInput" type="number" step="1" min="0" max="40" class="input-mini" data-bind="value: settingsViewModel.settings.plugins.filamentsensorsimplifiedopi.pin, disable:printing" required>
            <span class="help-block">Which Orange Pi pin is your sensor output attached to? (0 disables the plugin) <a target="_blank" href="https://pinout.xyz/">Pinout help</a></span>
            <div class="alert alert-error hidden" id="filamentsensorsimplifiedopi_settings_badpin">
                <i class="fas fa-info icon-info-sign iconRight"></i>
                {{ _('Warning: The selected pin is not a standard "data" pin.') }}
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="filamentsensorsimplifiedopi_settings_powerInput">{{ _('Sensor is connected to') }}</label>
        <div class="controls">
            <select id="filamentsensorsimplifiedopi_settings_powerInput" data-bind="value: settingsViewModel.settings.plugins.filamentsensorsimplifiedopi.power, disable:printing" required>
                <option value=0>{{ _('Ground') }}</option>
                <option value=1>{{ _('3.3V') }}</option>
            </select>
            <span class="help-block">Specify how the sensor (switch) is connected. One end of the sensor must be wired to ground or 3.3V.</span>
            <div class="alert alert-error">
                <i class="fas fa-exclamation icon-warning-sign iconRight"></i>
                Warning! Never connect the sensor to 5V! 5V could destroy GPIO of your Orange Pi.
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">{{ _('Switch type') }}</label>
        <div class="controls">
            <select id="filamentsensorsimplifiedopi_settings_triggeredInput" data-bind="value: settingsViewModel.settings.plugins.filamentsensorsimplifiedopi.triggered, disable:printing" required>
                <option value=0>{{ _('Triggered when open') }}</option>
                <option value=1>{{ _('Triggered when closed') }}</option>
            </select>
            <span class="help-block">Select if the switch is triggered when open or closed.</span>
        </div>
    </div>

    <h3>{{ _('Filament run out action') }}</h3>
    <div class="control-group">
        <label class="control-label" for="filamentsensorsimplifiedopi_settings_commandInput">{{ _('Action') }}</label>
        <div class="controls">
            <select data-bind="value: settingsViewModel.settings.plugins.filamentsensorsimplifiedopi.cmd_action, disable:printing" required>
                <option value="gcode">{{ _('Send G-code') }}</option>
                <option value="opnative">{{ _('OctoPrint pause') }}</option>
            </select>
        </div>
        <div class="controls" data-bind="visible: settingsViewModel.settings.plugins.filamentsensorsimplifiedopi.cmd_action() == 'gcode'">
            <br/>
            <span class="help-block">Which G-code will be sent to printer on filament runout.</span>
            <input id="filamentsensorsimplifiedopi_settings_commandInput" type="text" class="input-large" data-bind="value: settingsViewModel.settings.plugins.filamentsensorsimplifiedopi.g_code, disable:printing">
        </div>
    </div>

    <h3>{{ _('Test sensor') }}</h3>
    <div class="control-group">
        <div class="controls">
            <input type="button" class="btn btn-info" data-bind="click: testSensor, disable:printing" value="Test sensor">
            <div id="filamentsensorsimplifiedopi_settings_testResult" class="hide alert" data-bind="html: testSensorResult"></div>
        </div>
    </div>

    <div class="alert alert-info hidden" id="filamentsensorsimplifiedopi_settings_pullupwarn">
        <i class="fas fa-info icon-info-sign iconRight"></i>
        Pins 3 and 5 (Board mode) or 2 and 3 (BCM mode Raspberry Pi) or ? and ? (SUNXI mode Orange Pi) have physical pull up resistor. If sensor is connected to 3.3V this plugin won't work.
    </div>
    <br>

    <p>For more information click <a target="_blank" href="https://github.com/camochu/Filament_sensor_simplified_OPi">here</a></p>

</form>
